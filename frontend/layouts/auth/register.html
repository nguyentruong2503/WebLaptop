<div id="registerBox" class="bg-gray-800 bg-opacity-95 rounded-lg shadow-lg w-full max-w-lg mx-4 p-8 relative z-10">
    <button id="close-register" class="absolute top-3 right-4 text-2xl text-gray-400 hover:text-gray-200 font-bold">&times;</button>
    <h2 class="text-xl font-bold text-center text-blue-400 mb-6">Đăng ký tài khoản</h2>
    <form id="registerForm">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-200">Tên</label>
          <input type="text" id="register-name" class="w-full border border-gray-600 rounded px-3 py-2 bg-gray-700 text-gray-100" required placeholder="Nhập tên...">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-200">Email</label>
          <input type="email" id="register-email" class="w-full border border-gray-600 rounded px-3 py-2 bg-gray-700 text-gray-100" required placeholder="Nhập email...">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-200">Mật khẩu</label>
          <input type="password" id="register-password" class="w-full border border-gray-600 rounded px-3 py-2 bg-gray-700 text-gray-100" required minlength="6" placeholder="Nhập mật khẩu...">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-200">Số điện thoại</label>
          <input type="text" id="register-phone" class="w-full border border-gray-600 rounded px-3 py-2 bg-gray-700 text-gray-100" placeholder="Nhập số điện thoại...">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-200">Địa chỉ</label>
          <input type="text" id="register-address" class="w-full border border-gray-600 rounded px-3 py-2 bg-gray-700 text-gray-100" placeholder="Nhập địa chỉ...">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-200">Năm sinh</label>
          <input type="number" id="register-yearOfbirth" min="1900" max="2100" class="w-full border border-gray-600 rounded px-3 py-2 bg-gray-700 text-gray-100" placeholder="Năm sinh">
        </div>
      </div>
      <button type="submit" class="w-full mt-6 bg-gradient-to-r from-green-700 via-emerald-700 to-gray-700 text-white py-2 rounded font-semibold shadow-md btn-register-animate">Đăng ký</button>
    </form>
    <div class="mt-4 text-center text-sm text-gray-300">
        Đã có tài khoản?
        <button id="show-login" class="text-blue-400 hover:underline focus:outline-none">Đăng nhập</button>
    </div>
</div>
<script>
document.getElementById('close-register').onclick = function() {
    loadPage('auth/login.html');
};
document.getElementById('show-login').onclick = function() {
    loadPage('auth/login.html');
};
document.getElementById('registerForm').onsubmit = function(e) {
    e.preventDefault();
    const name = document.getElementById('register-name').value;
    const email = document.getElementById('register-email').value;
    const password = document.getElementById('register-password').value;
    const phone = document.getElementById('register-phone').value;
    const address = document.getElementById('register-address').value;
    const yearOfbirth = document.getElementById('register-yearOfbirth').value;

    fetch('http://127.0.0.1:8000/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, email, password, phone, address, yearOfbirth })
    })
    .then(res => res.json())
    .then(data => {
        if (data.errors) {
            if (data.errors.email && data.errors.email[0].includes('tồn tại')) {
                alert('Email đã tồn tại trong hệ thống!');
            } else {
                alert(Object.values(data.errors).flat().join('\n'));
            }
        } else if (data.user) {
            alert('Đăng ký thành công!');
            loadPage('auth/login.html');
        } else {
            alert('Có lỗi xảy ra, vui lòng thử lại!');
        }
    })
    .catch(() => alert('Không thể kết nối tới máy chủ!'));
};
</script>